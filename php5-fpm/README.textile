h1. Описание

Рецепт для установки и автоматической конфигурации PHP5-FPM.

После первичной установки вы получаете следующие плюшки:

* Установленный и сконфигурированный PHP5-FPM, вместе с лог-ротейтом.
* Стандартно сконфигурированный пул 'pool_0' на 127.0.0.1:9000.
* Страничка статуса FPM по адресу @http://<host>/pool_0/status@. Доступна только локально. (Только для 5.3.3)
* Установленные модули @php5-gd@ и @php5-mysql@.

TODO:

* Мониторинг конфигурационных директорий на предмет левых файлов.

h1. Настройка

Вся конфигурация самого сервиса, а также всех пулов хранится в атрибутах ноды. Редактирование этой конфигурации производится из веб-интерфейса Chef-а, либо редактированием ноды через Knife. Назначение атрибутов очевидно и описываться не будет.

Установка дополнительных модулей производится через редактирование атрибута @fpm/modules@. Настройка параметров модулей производится через настройки PHP для конкретного пула, что описано далее.

Настройка PHP и модулей для каждого пула производится через атрибут @fpm/pools/.../php@ с помощью записей вида @parameter: true@, или @module.answer: 42@. Файл @php.ini@ представляет собой ванильную конфигурацию без возможности редактирования, которая автоматически аугментируется настройками из пулов.

bq. Удобный инструмент для редактирования и валидирования JSON-ов "jsonlint.com":http://www.jsonlint.com.

Все возможные конфигурационные параметры PHP-FPM установлены в значения по умолчанию. В пуле по умолчанию, настройки PHP относительно стандартной конфигурации изменены следующим образом:

* register_globals = On
* short_open_tag = On
* display_errors = Off
* error_reporting = E_ALL & ~E_DEPRECATED
* date.timezone = 'Europe/Moscow'
* max_execution_time = 60
